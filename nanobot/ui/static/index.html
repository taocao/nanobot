<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nanobot üêà - Learn Agentic AI</title>
    <link rel="stylesheet" href="/static/style.css?v=2">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">üêà</span>
                <span class="logo-text">nanobot</span>
            </div>
            <div class="nav-items">
                <button class="nav-item active" data-tab="chat">
                    <span class="nav-icon">üí¨</span>
                    <span>Chat</span>
                </button>
                <button class="nav-item" data-tab="logs">
                    <span class="nav-icon">üìã</span>
                    <span>Logs</span>
                </button>
                <button class="nav-item" data-tab="history">
                    <span class="nav-icon">üìú</span>
                    <span>History</span>
                </button>
                <button class="nav-item" data-tab="config">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Config</span>
                </button>
            </div>
            <div class="sidebar-footer">
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span id="status-text">Loading...</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Metrics Bar -->
            <div class="metrics-bar">
                <div class="metric">
                    <span class="metric-icon">ü§ñ</span>
                    <span class="metric-label">Model:</span>
                    <span id="metric-model" class="metric-value">Loading...</span>
                </div>
                <div class="metric">
                    <span class="metric-icon">üìä</span>
                    <span class="metric-label">Context:</span>
                    <span id="metric-tokens" class="metric-value">0</span>
                    <span class="metric-unit">/</span>
                    <span id="metric-limit" class="metric-value">128K</span>
                    <div class="token-bar">
                        <div id="token-bar-fill" class="token-bar-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="metric">
                    <span class="metric-icon">‚¨ÜÔ∏è</span>
                    <span class="metric-label">In:</span>
                    <span id="metric-input" class="metric-value">0</span>
                </div>
                <div class="metric">
                    <span class="metric-icon">‚¨áÔ∏è</span>
                    <span class="metric-label">Out:</span>
                    <span id="metric-output" class="metric-value">0</span>
                </div>
                <button id="toggle-debug" class="btn btn-sm toggle-debug active">
                    <span>üîç Debug</span>
                </button>
            </div>

            <!-- Chat Tab -->
            <section id="chat-tab" class="tab-content active">
                <div class="split-layout">
                    <!-- Chat Panel -->
                    <div class="chat-panel">
                        <div class="chat-header">
                            <h1>Chat with nanobot</h1>
                            <div class="session-selector">
                                <label for="session-select">Session:</label>
                                <select id="session-select">
                                    <option value="ui:default">Default</option>
                                </select>
                                <button id="new-session-btn" class="btn btn-sm">+ New</button>
                            </div>
                        </div>
                        <div class="chat-container">
                            <div id="chat-messages" class="chat-messages">
                                <div class="welcome-message">
                                    <div class="welcome-icon">üêà</div>
                                    <h2>Welcome to nanobot!</h2>
                                    <p>Watch how the AI processes your requests step-by-step</p>
                                    <div class="welcome-features">
                                        <div class="feature"><span class="feature-dot user"></span> Your messages</div>
                                        <div class="feature"><span class="feature-dot assistant"></span> AI responses
                                        </div>
                                        <div class="feature"><span class="feature-dot tool"></span> Tool executions
                                        </div>
                                        <div class="feature"><span class="feature-dot system"></span> System info</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <textarea id="chat-input" placeholder="Type your message... (Shift+Enter for new line)"
                                rows="1"></textarea>
                            <button id="send-btn" class="btn btn-primary">
                                <span>Send</span>
                                <span class="send-icon">‚Üí</span>
                            </button>
                        </div>
                    </div>

                    <!-- Debug Panel -->
                    <div id="debug-panel" class="debug-panel">
                        <div class="debug-section">
                            <h3 class="debug-title">
                                <span class="debug-icon">üîÑ</span>
                                Processing Steps
                            </h3>
                            <div id="processing-steps" class="processing-steps">
                                <div class="step waiting expandable" data-step="receive">
                                    <div class="step-header">
                                        <span class="step-num">1</span>
                                        <span class="step-label">Receive Input</span>
                                        <span class="step-status">‚è≥</span>
                                        <span class="step-expand">‚ñ∂</span>
                                    </div>
                                    <div class="step-details hidden"></div>
                                </div>
                                <div class="step waiting expandable" data-step="context">
                                    <div class="step-header">
                                        <span class="step-num">2</span>
                                        <span class="step-label">Build Context</span>
                                        <span class="step-status">‚è≥</span>
                                        <span class="step-expand">‚ñ∂</span>
                                    </div>
                                    <div class="step-details hidden"></div>
                                </div>
                                <div class="step waiting expandable" data-step="llm">
                                    <div class="step-header">
                                        <span class="step-num">3</span>
                                        <span class="step-label">Call LLM</span>
                                        <span class="step-status">‚è≥</span>
                                        <span class="step-expand">‚ñ∂</span>
                                    </div>
                                    <div class="step-details hidden"></div>
                                </div>
                                <div class="step waiting expandable" data-step="tools">
                                    <div class="step-header">
                                        <span class="step-num">4</span>
                                        <span class="step-label">Execute Tools</span>
                                        <span class="step-status">‚è≥</span>
                                        <span class="step-expand">‚ñ∂</span>
                                    </div>
                                    <div class="step-details hidden"></div>
                                </div>
                                <div class="step waiting expandable" data-step="response">
                                    <div class="step-header">
                                        <span class="step-num">5</span>
                                        <span class="step-label">Generate Response</span>
                                        <span class="step-status">‚è≥</span>
                                        <span class="step-expand">‚ñ∂</span>
                                    </div>
                                    <div class="step-details hidden"></div>
                                </div>
                            </div>
                        </div>

                        <div class="debug-section collapsible">
                            <h3 class="debug-title toggle-section">
                                <span class="debug-icon">üìù</span>
                                System Prompt
                                <span class="toggle-icon">‚ñº</span>
                            </h3>
                            <div class="section-content">
                                <pre id="system-prompt" class="code-block system-prompt">Loading...</pre>
                            </div>
                        </div>

                        <div class="debug-section">
                            <h3 class="debug-title">
                                <span class="debug-icon">üîß</span>
                                Tool Calls
                            </h3>
                            <div id="tool-calls" class="tool-calls">
                                <div class="empty-state">No tool calls yet</div>
                            </div>
                        </div>

                        <div class="debug-section">
                            <h3 class="debug-title">
                                <span class="debug-icon">üì®</span>
                                Message Flow
                            </h3>
                            <div id="message-flow" class="message-flow">
                                <div class="empty-state">Send a message to see the flow</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Logs Tab -->
            <section id="logs-tab" class="tab-content">
                <div class="page-header">
                    <h1>Execution Logs</h1>
                    <button id="refresh-logs-btn" class="btn btn-sm">üîÑ Refresh</button>
                </div>
                <p class="logs-description">View detailed debug information from past requests. Each log contains
                    step-by-step execution data, tool calls, and metrics.</p>
                <div id="logs-list" class="logs-list">
                    <p class="loading-text">Loading logs...</p>
                </div>
                <div id="log-detail" class="log-detail hidden">
                    <div class="log-detail-header">
                        <button id="back-to-logs-btn" class="btn btn-sm">‚Üê Back</button>
                        <h2 id="log-title">Log Details</h2>
                        <button id="delete-log-btn" class="btn btn-sm btn-danger">üóëÔ∏è Delete</button>
                    </div>
                    <div id="log-content" class="log-content"></div>
                </div>
            </section>

            <!-- History Tab -->
            <section id="history-tab" class="tab-content">
                <div class="page-header">
                    <h1>Conversation History</h1>
                    <button id="refresh-history-btn" class="btn btn-sm">üîÑ Refresh</button>
                </div>
                <div id="history-list" class="history-list">
                    <p class="loading-text">Loading sessions...</p>
                </div>
                <div id="history-detail" class="history-detail hidden">
                    <div class="history-detail-header">
                        <button id="back-to-list-btn" class="btn btn-sm">‚Üê Back</button>
                        <h2 id="history-session-key">Session</h2>
                        <button id="delete-session-btn" class="btn btn-sm btn-danger">üóëÔ∏è Delete</button>
                    </div>
                    <div id="history-messages" class="history-messages"></div>
                </div>
            </section>

            <!-- Config Tab -->
            <section id="config-tab" class="tab-content">
                <div class="page-header">
                    <h1>Configuration</h1>
                    <div class="header-actions">
                        <button id="reload-config-btn" class="btn btn-sm">üîÑ Reload</button>
                        <button id="save-config-btn" class="btn btn-primary">üíæ Save</button>
                    </div>
                </div>
                <div class="config-container">
                    <!-- Providers Section -->
                    <div class="config-section">
                        <h2 class="section-title">
                            <span class="section-icon">ü§ñ</span>
                            LLM Providers
                        </h2>
                        <div class="config-grid" id="providers-config">
                            <!-- Dynamically populated -->
                        </div>
                    </div>

                    <!-- Agent Defaults Section -->
                    <div class="config-section">
                        <h2 class="section-title">
                            <span class="section-icon">üß†</span>
                            Agent Defaults
                        </h2>
                        <div class="config-fields" id="agent-config">
                            <!-- Dynamically populated -->
                        </div>
                    </div>

                    <!-- Tools Section -->
                    <div class="config-section">
                        <h2 class="section-title">
                            <span class="section-icon">üîß</span>
                            Tools
                        </h2>
                        <div class="config-fields" id="tools-config">
                            <!-- Dynamically populated -->
                        </div>
                    </div>

                    <!-- Raw JSON Editor (Advanced) -->
                    <div class="config-section collapsible">
                        <h2 class="section-title toggle-section">
                            <span class="section-icon">üìù</span>
                            Advanced: Raw JSON
                            <span class="toggle-icon">‚ñº</span>
                        </h2>
                        <div class="section-content hidden">
                            <textarea id="raw-config-editor" class="code-editor" rows="20"></textarea>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="/static/app.js?v=2"></script>
</body>

</html>